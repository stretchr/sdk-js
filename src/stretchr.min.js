var Stretchr=Stretchr||{};Stretchr.Defaults={hostName:"stretchr.com",apiVersion:"1.1",protocol:"https",readMethod:"GET",createMethod:"POST",updateMethod:"PATCH",replaceMethod:"PUT",deleteMethod:"DELETE",apiVersions:{1.1:"V1_1"}},Stretchr.Client=function(a,b,c,d){var d=d||{};this.account=a,this.project=b,this.key=c,this.hostName=d.hostName||Stretchr.Defaults.hostName,this.protocol=d.protocol||Stretchr.Defaults.protocol,this.apiVersion=d.apiVersion||Stretchr.Defaults.apiVersion,this.transporter=d.transporter||{}},Stretchr.Client.prototype.at=function(a){var b=new Stretchr.Request(a,this);return b.params("key",this.key),b},Stretchr.Request=function(a,b){this.path=a,this.client=b,this._params=new Stretchr.Bag},Stretchr.Request.prototype.params=function(){return this._params.data.apply(this._params,arguments),this},Stretchr.Request.prototype.url=function(){var a=[this.client.protocol,"://",this.client.account,".",this.client.hostName,"/api/v",this.client.apiVersion,"/",this.client.project,"/",this.path].join(""),b=this._params.queryString();return b&&(a+="?"+b),a},Stretchr.Request.prototype.read=function(a){this.method=Stretchr.Defaults.readMethod,this.client.transporter.makeRequest(this,a)},Stretchr.Request.prototype.create=function(a,b){this.body=a,this.method=Stretchr.Defaults.createMethod,this.client.transporter.makeRequest(this,b)},Stretchr.Request.prototype.update=function(a,b){this.body=a,this.method=Stretchr.Defaults.updateMethod,this.client.transporter.makeRequest(this,b)},Stretchr.Request.prototype.replace=function(a,b){this.body=a,this.method=Stretchr.Defaults.replaceMethod,this.client.transporter.makeRequest(this,b)},Stretchr.Request.prototype.remove=function(a){this.method=Stretchr.Defaults.deleteMethod,this.client.transporter.makeRequest(this,a)},Stretchr.Response=function(a,b,c){var d=new Stretchr[Stretchr.Defaults.apiVersions[a.apiVersion]].Response(b);d.success?c.success&&"function"==typeof c.success&&c.success(d):c.error&&"function"==typeof c.error&&c.error(d),c.done&&"function"==typeof c.done&&c.done(d)},Stretchr.V1_1=Stretchr.V1_1||{},Stretchr.V1_1.Response=function(a){if(this.raw=a,a["~data"]&&a["~data"]["~items"]?(this.data=a["~data"]["~items"],this.total=a["~data"]["~total"],this.count=a["~data"]["~count"]):this.data="object"==typeof a["~data"]&&"undefined"!=typeof a["~data"].length?a["~data"]:[a["~data"]],this.status=a["~status"],this.success=this.status>=200&&this.status<=299,this.errors=a["~errors"],this.errors){this.errorMessages=[];for(var b=0;b<this.errors.length;b++)this.errorMessages.push(this.errors[b]["~message"])}this.changes=a["~changes"]},Stretchr.Bag=function(a){function b(a){return d[a]}function c(a,b){("object"!=typeof b||"undefined"==typeof b.length)&&(b=[b]),"object"==typeof d[a]&&"undefined"!=typeof d[a].length?d[a]=d[a].concat(b):"undefined"==typeof d[a]&&(d[a]=b)}var d={};return{data:function(a,e){if(0==arguments.length)return d;if("object"!=typeof a&&"undefined"!=typeof e)c(a,e);else{if("object"!=typeof a)return b(a);for(var f in a)c(f,a[f])}},queryString:function(){var a=[];for(var b in d)for(var c=0;c<d[b].length;c++)val=d[b][c],a.push(encodeURIComponent(b)+"="+encodeURIComponent(val));return a.join("&")}}};