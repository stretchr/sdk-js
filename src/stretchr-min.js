/*

  Stretchr JavaScript SDK v1.3
  /api/v1.1

  by Mat Ryer and Ryan Quinn
  Copyright (c) 2013 Stretchr, Inc.

  Please consider promoting this project if you find it useful.

  Permission is hereby granted, free of charge, to any person obtaining a copy of this
  software and associated documentation files (the "Software"), to deal in the Software
  without restriction, including without limitation the rights to use, copy, modify, merge,
  publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons
  to whom the Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in all copies
  or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
  INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
  PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE
  FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
  OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.

*/
eval(function(e,t,n,r,i,s){i=function(e){return(e<t?"":i(parseInt(e/t)))+((e=e%t)>35?String.fromCharCode(e+29):e.toString(36))};if(!"".replace(/^/,String)){while(n--)s[i(n)]=r[n]||i(n);r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--)if(r[n])e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n]);return e}('5 1h=8(){5 k={1u:"1.3.1",10:[],11:{},L:8(c){6(k.11[c]){12 M k.13(c);m G}5 d=8(){6(!4.$14){12 M k.15(c);}4.$14.u(4);4.A.u(4,9)};d.7.A=8(){};d.$U={};d.7.$14=8(){n(5 a p 4.$w.$U){4[a]={};V=4.$w.$U[a].7;n(5 b p V){6(B V[b]==="8"){4[a][b]=V[b].P(4)}}}};5 e=[];n(5 i=1,l=9.o-1;i<l;i++){5 f=9[i];6(f){6(f.$1i){f=f.$1i(d,9)}6(!f)1v;6(f.$1j){d.$U[f.$16]=f;W(f.7,d.7)}y 6(B f=="1w"){W(f,d.7)}6(f.$1k){f.$1k(d,9)}6(f.$X){e.q(f.$X.P(f,d,9))}}y{1l("1x 1m 1y "+f+" 17 1z "+c+" w.")}}6(9.o>1){5 g=9[9.o-1];n(5 h p g){5 j=g[h];6(h.1A(0,1)==="$"){d[h]=j}y{d.7[h]=j}}}d.1n=8(){m"<{ z.L: "+4.$16+" }>"};d.$1j=v;d.7.1B=d.7.$w=d;k.10[k.10.o]=d.$16=c;k.11[c]=d;6(e.o>0){n(5 i p e){e[i]()}}m d}};k.F={$Y:8(c,d){c[d]=(8(){5 b=d;m 8(){6(9.o===1&&B 9[0]=="8"){5 a=[b,9[0]];4.Q.u(4,a)}y{5 a=[b];W(9,a);4.H.u(4,a)}m 4}})()},$X:8(a){a.Q=k.F.Q;a.H=k.F.H;a.Z=k.F.Z;a.18=k.F.18;6(a.7.19){n(5 i p a.7.19){5 b=a.7.19[i];k.F.$Y(a.7,b)}}},Q:8(a,b){4.r=4.r||{};4.r[a]=4.r[a]||[];4.r[a].q(b);m 4},Z:8(a,b){5 c=[];5 d=[a,4];n(5 i=2;i<9.o;i++){c.q(9[i]);d.q(9[i])}6(4.$w&&4.$w.r&&4.$w.r[a]){4.$w.H.u(4.$w,d)}5 e=[];6(4.r&&4.r[a]){e=4.r[a]}6(b&&b[a]){e.q(b[a])}6(e.o>0){n(5 i p e){5 f=e[i];5 g=f.u(4,c);6(g===x){m x}}}},H:8(a){5 b=[a,G];n(5 i=1;i<9.o;i++){b.q(9[i])}m 4.Z.u(4,b)},18:8(a,b){6(4.r&&4.r[a]){n(5 i p 4.r[a]){5 c=4.r[a][i];6(c==b){4.r[a].1C(i,1);m v}}}m x},R:8(a){5 b=9[9.o-1];6(B b!=="8"){12 M k.1a("R","1D 1E 1F 1G 1H 1b 1I 1m 1J.");}5 c=[];n(5 i=1;i<9.o-1;i++){c.q(9[i])}c.1K("1L:"+a);5 d=4.H.u(4,c);6(d===x){m x}d=b();c.q(d);c[0]=a;4.H.u(4,c);m d}};k.C={$X:8(a){6(a.7.I&&B a.7.I.o!="S"){n(5 b p a.7.I){k.C.$D(a.7,a.7.I[b],v,v,G)}}y 6(a.7.I){n(5 b p a.7.I){k.C.$D(a.7,b,v,v,a.7.I[b])}}6(a.7.J&&B a.7.J.o!="S"){n(5 b p a.7.J){k.C.$D(a.7,a.7.J[b],v,x,G)}}y 6(a.7.J){n(5 b p a.7.J){k.C.$D(a.7,b,v,x,a.7.J[b])}}6(a.7.K&&B a.7.K.o!="S"){n(5 b p a.7.K){k.C.$D(a.7,a.7.K[b],x,v,G)}}y 6(a.7.K){n(5 b p a.7.K){k.C.$D(a.7,b,x,v,a.7.K[b])}}},D:8(){5 a=[4];n(5 b p 9){a.q(9[b])}k.C.$D.u(4,a);m 4}};k.C.$D=8(c,d,e,f,g){6(c.Q){6(!c.1c){k.F.$Y(c,"1c")}k.F.$Y(c,d+"1o")}5 h=d;5 i;c.N=c.N||8(a){m"1M"+a};5 j=c.N(d);c.1d=c.1d||8(a,b){6(4.R){4.R("1c",d,4[j],b,8(){4.R(a+"1o",4[j],b,8(){4[4.N(a)]=b}.P(4))}.P(4))}y{4[4.N(a)]=b}m 4};c.1e=c.1e||8(a){m 4[4.N(a)]};c[j]=g||G;6(f!==x){6(f===v){i="1N"+d.1O(0).1P()+d.1Q(1)}y{i=f}c[i]=c[i]||8(a){4.1d(d,a);m 4}}6(e!==x){6(e!==v){h=e}c[h]=c[h]||8(){m 4.1e(d)}}m c};k.E=k.L("z.E",{A:8(a){4.1p=a},1n:8(){m"z.E: \\" + 1p + \\""}});k.13=k.L("z.13",k.E,{A:8(a){4["z.E"].A("1R 1S a w 1T \'"+a+"\' 1U 1V, 1W 1X 1Y w 1Z; e.g. 20."+a)}});k.15=k.L("z.15",k.E,{A:8(a){4["z.E"].A("1q 1r 17 21 a M 22; 23\'t 24 25 1b 26, 27 1b M 28: 5 29 = M "+a+"();")}});k.1a=k.L("z.1a",k.E,{A:8(a,b){4["z.E"].A("1q 1r 17 2a "+a+"; "+b)}});m k};5 1l=8(a){6(1f){6(1f.1s){1f.1s(a)}}};5 W=8(a,b){6(B a.o!=="S"&&B b.o!=="S"){n(5 s p a){b.q(a[s])}}y{n(5 s p a){6(a.2b(s))b[s]=a[s]}}};5 z=1h();5 1t=8(){5 b=9[0]||G,1g=9[1]||4,T=[],i=2,l=9.o,O;n(;i<l;i++){T.q(9[i])}O=8(){5 a=[];5 i=0;n(i=0,l=T.o;i<l;i++){a.q(T[i])}n(i=0,l=9.o;i<l;i++){a.q(9[i])}m b.u(1g,a)};O.2c=b;O.2d=1g;O.2e=T;m O};2f.7.P=8(){5 a=[],i=0,l=9.o;a.q(4);n(;i<l;i++){a.q(9[i])}m 1t.u(2g,a)};',62,141,"||||this|var|if|prototype|function|arguments|||||||||||||return|for|length|in|push|ooevents|||apply|true|class|false|else|oo|init|typeof|Properties|addProperty|Exception|Events|null|fire|properties|getters|setters|Class|new|getPropertyInternalName|bound|bind|on|withEvent|undefined|_args|bases|basePrototype|ooextend|afterClassDefined|addEvent|fireWith|classes|classesmap|throw|DuplicateClassNameException|initialiseBases|IncorrectSyntaxException|className|when|removeCallback|events|IncorrectArgumentsException|the|propertyChanged|setProperty|getProperty|console|_obj|ooreset|beforeInherited|isClass|afterInherited|oowarn|to|toString|Changed|message|Incorrect|syntax|warn|oobind|version|continue|object|Failed|inherit|building|substr|constructor|splice|The|last|argument|must|be|codeblock|execute|unshift|before|_|set|charAt|toUpperCase|slice|Cannot|define|because|already|exists|consider|namespacing|your|names|YourCompany|creating|instance|don|just|call|method|use|keyword|obj|calling|hasOwnProperty|func|context|args|Function|window".split("|"),0,{}));eval(function(e,t,n,r,i,s){i=function(e){return(e<t?"":i(parseInt(e/t)))+((e=e%t)>35?String.fromCharCode(e+29):e.toString(36))};if(!"".replace(/^/,String)){while(n--)s[i(n)]=r[n]||i(n);r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--)if(r[n])e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n]);return e}('(8(m){m.P=8(){4 l=8(){5 l.S.15(m,9)};l.19="1.0.1";l.w=8(s){6(!s)5{};6(s.7("=")===-1&&s.7("&")===-1)5{};s=l.B(s);4 a={};4 b=s.x("&");E(4 c C b){4 d=b[c].x("=");4 e=W(d[0]),X=W(d[1]);l.A(a,e,X,1c)}5 a};l.A=8(a,c,d,e){4 f=c;4 g=c.7(".");4 h=c.7("[");6(g>-1){f=c.n(0,g);4 i=c.n(g+1)}z 6(h==-1){5 e?(a[c]=d):a[c]}h=f.7("[");6((h>-1&&h<g)||(h>-1&&g==-1)){4 j=f.n(0,f.7("["));4 b=f.x("[")[1];4 k=18(b.n(0,b.r-1));a=(a[j]=a[j]||[]);a=(a[k]=a[k]||{})}z{6(!a[f]){a[f]={}}a=a[f]||{}}6(i)5 l.A(a,i,d,e);z 5 a};l.v=8(a,b){10(t(a)){y"R":4 c=[];4 d;E(4 e C a){6(!a.11(e))U;4 f=a[e];6(t(e)==="D"||e.r===0||t(f)==="D")U;d=b?b+"."+e:e;6(t a.r!=="D"){d=b?b+"["+e+"]":e}6(t f==="R"){c.q(l.v(f,d))}z{c.q(G(d)+"="+G(f))}}5 c.O("&")}5 G(a)};l.14=8(){4 a=(l.Q?l.J:l.o);4 b=[K.13,a];4 c={};10(9.r){y 1:b.q(l.v(9[0]));V;y 2:b[0]=l.M(9[0]);c=l.w(9[0]);c=l.Y(c,9[1]);b.q(l.v(c));V;y 3:b[0]=l.M(9[0]);b[1]=l.o;b.q(l.v(9[1]));(t(9[2])==="12")?b.q(l.u):b.q(l.J);b.q(l.v(9[2]))}4 s=b.O("");6(s.7(a)==s.r-a.r){s=s.n(0,s.r-a.r)}5 s};l.Q=17;l.o="?";l.u="#";l.J="#?";l.Z=8(){4 a=l.w(l.L()+"&"+l.N());5 l.F?l.F:l.F=a};l.S=8(a,b){4 c=l.A(l.Z(),a);5 t(c)==="D"?b:c};l.16=8(){5 l.I?l.I:l.I=l.w(l.L())};l.T=8(){5 l.H?l.H:l.H=l.w(l.N())};l.L=8(){5 l.B(K.1a)};l.N=8(){5 l.B(K.T)};l.B=8(s){6(s.7(l.o)>-1)s=s.x(l.o)[1];6(s.7(l.u)>-1)s=s.x(l.u)[1];6(s.7("=")===-1&&s.7("&")===-1)5"";1b(s.7(l.u)==0||s.7(l.o)==0)s=s.n(1);5 s};l.M=8(p){6(p.7(l.o)>-1)p=p.n(0,p.7(l.o));6(p.7(l.u)>-1)p=p.n(0,p.7(l.u));5 p};l.Y=8(){4 a={};E(4 b C 9)E(4 k C 9[b])a[k]=9[b][k];5 a};5 l};m.1d=P()})(1e);',62,77,"||||var|return|if|indexOf|function|arguments||||||||||||||substr|querySeperator||push|length||typeof|hashSeperator|stringify|parse|split|case|else|_access|_cleanParamStr|in|undefined|for|_all|encodeURIComponent|_hash|_query|hashQuerySeperator|location|querystring|_cleanPath|hashstring|join|MakeArg|urlUseHash|object|get|hash|continue|break|decodeURIComponent|val|merge|all|switch|hasOwnProperty|string|pathname|url|apply|query|false|parseInt|version|search|while|true|Arg|window".split("|"),0,{}));var Stretchr={debug:false,version:"1.2.2",apiVersion:"1.1",defaultPageSize:10,_counter:0,ParamKey:"key",ParamCallback:"callback",ParamBody:"body",ParamAlways200:"always200",ParamMethod:"method",ParamOrder:"order",ParamSkip:"skip",ParamLimit:"limit",ParamAuth:"auth",PrefixFilterFields:":",MethodGet:"GET",MethodPost:"POST",MethodPatch:"PATCH",MethodDelete:"DELETE",MethodPut:"PUT",ResourceKeyId:"~id",ResponseKeyStatus:"~status",ResponseKeyData:"~data",ResponseKeyErrors:"~errors",ResponseKeyErrorsMessage:"~message",ResponseKeyContext:"~context",ResponseKeyCollectionItems:"~items",ResponseKeyCollectionTotal:"~total",ResponseKeyDataChanges:"~changes",ResponseKeyChangeInfoCreated:"~created",ResponseKeyChangeInfoUpdated:"~updated",ResponseKeyChangeInfoDeleted:"~deleted",ResponseKeyChangeInfoDeltas:"~deltas",SessionKeyLoggedIn:"loggedIn",SessionKeyLoggedInYes:"YES",SessionKeyLoggedInNo:"NO",SessionKeyAuthCode:"auth",SessionKeyuserpath:"userpath",UrlParamAuthKey:"auth",UrlParamAuthUser:"user"};Stretchr.counter=function(){return++Stretchr._counter};Stretchr.merge=function(){var e={};for(var t in arguments){var n=arguments[t];for(var r in n)e[r]=n[r]}return e};Stretchr.fixoptions=function(){if(typeof arguments[0]==="object"){return arguments[0]}return{after:arguments[0]||null}};Stretchr.log=function(){if(!Stretchr.debug)return;if(console){if(arguments[1]===true)console.warn.apply(console,[arguments[0]]);else console.info.apply(console,arguments)}};eval(function(e,t,n,r,i,s){i=function(e){return(e<t?"":i(parseInt(e/t)))+((e=e%t)>35?String.fromCharCode(e+29):e.toString(36))};if(!"".replace(/^/,String)){while(n--)s[i(n)]=r[n]||i(n);r=[function(e){return s[e]}];i=function(){return"\\w+"};n=1}while(n--)if(r[n])e=e.replace(new RegExp("\\b"+i(n)+"\\b","g"),r[n]);return e}('5 1h=8(){5 k={1u:"1.3.1",10:[],11:{},L:8(c){6(k.11[c]){12 M k.13(c);m G}5 d=8(){6(!4.$14){12 M k.15(c);}4.$14.u(4);4.A.u(4,9)};d.7.A=8(){};d.$U={};d.7.$14=8(){n(5 a p 4.$w.$U){4[a]={};V=4.$w.$U[a].7;n(5 b p V){6(B V[b]==="8"){4[a][b]=V[b].P(4)}}}};5 e=[];n(5 i=1,l=9.o-1;i<l;i++){5 f=9[i];6(f){6(f.$1i){f=f.$1i(d,9)}6(!f)1v;6(f.$1j){d.$U[f.$16]=f;W(f.7,d.7)}y 6(B f=="1w"){W(f,d.7)}6(f.$1k){f.$1k(d,9)}6(f.$X){e.q(f.$X.P(f,d,9))}}y{1l("1x 1m 1y "+f+" 17 1z "+c+" w.")}}6(9.o>1){5 g=9[9.o-1];n(5 h p g){5 j=g[h];6(h.1A(0,1)==="$"){d[h]=j}y{d.7[h]=j}}}d.1n=8(){m"<{ z.L: "+4.$16+" }>"};d.$1j=v;d.7.1B=d.7.$w=d;k.10[k.10.o]=d.$16=c;k.11[c]=d;6(e.o>0){n(5 i p e){e[i]()}}m d}};k.F={$Y:8(c,d){c[d]=(8(){5 b=d;m 8(){6(9.o===1&&B 9[0]=="8"){5 a=[b,9[0]];4.Q.u(4,a)}y{5 a=[b];W(9,a);4.H.u(4,a)}m 4}})()},$X:8(a){a.Q=k.F.Q;a.H=k.F.H;a.Z=k.F.Z;a.18=k.F.18;6(a.7.19){n(5 i p a.7.19){5 b=a.7.19[i];k.F.$Y(a.7,b)}}},Q:8(a,b){4.r=4.r||{};4.r[a]=4.r[a]||[];4.r[a].q(b);m 4},Z:8(a,b){5 c=[];5 d=[a,4];n(5 i=2;i<9.o;i++){c.q(9[i]);d.q(9[i])}6(4.$w&&4.$w.r&&4.$w.r[a]){4.$w.H.u(4.$w,d)}5 e=[];6(4.r&&4.r[a]){e=4.r[a]}6(b&&b[a]){e.q(b[a])}6(e.o>0){n(5 i p e){5 f=e[i];5 g=f.u(4,c);6(g===x){m x}}}},H:8(a){5 b=[a,G];n(5 i=1;i<9.o;i++){b.q(9[i])}m 4.Z.u(4,b)},18:8(a,b){6(4.r&&4.r[a]){n(5 i p 4.r[a]){5 c=4.r[a][i];6(c==b){4.r[a].1C(i,1);m v}}}m x},R:8(a){5 b=9[9.o-1];6(B b!=="8"){12 M k.1a("R","1D 1E 1F 1G 1H 1b 1I 1m 1J.");}5 c=[];n(5 i=1;i<9.o-1;i++){c.q(9[i])}c.1K("1L:"+a);5 d=4.H.u(4,c);6(d===x){m x}d=b();c.q(d);c[0]=a;4.H.u(4,c);m d}};k.C={$X:8(a){6(a.7.I&&B a.7.I.o!="S"){n(5 b p a.7.I){k.C.$D(a.7,a.7.I[b],v,v,G)}}y 6(a.7.I){n(5 b p a.7.I){k.C.$D(a.7,b,v,v,a.7.I[b])}}6(a.7.J&&B a.7.J.o!="S"){n(5 b p a.7.J){k.C.$D(a.7,a.7.J[b],v,x,G)}}y 6(a.7.J){n(5 b p a.7.J){k.C.$D(a.7,b,v,x,a.7.J[b])}}6(a.7.K&&B a.7.K.o!="S"){n(5 b p a.7.K){k.C.$D(a.7,a.7.K[b],x,v,G)}}y 6(a.7.K){n(5 b p a.7.K){k.C.$D(a.7,b,x,v,a.7.K[b])}}},D:8(){5 a=[4];n(5 b p 9){a.q(9[b])}k.C.$D.u(4,a);m 4}};k.C.$D=8(c,d,e,f,g){6(c.Q){6(!c.1c){k.F.$Y(c,"1c")}k.F.$Y(c,d+"1o")}5 h=d;5 i;c.N=c.N||8(a){m"1M"+a};5 j=c.N(d);c.1d=c.1d||8(a,b){6(4.R){4.R("1c",d,4[j],b,8(){4.R(a+"1o",4[j],b,8(){4[4.N(a)]=b}.P(4))}.P(4))}y{4[4.N(a)]=b}m 4};c.1e=c.1e||8(a){m 4[4.N(a)]};c[j]=g||G;6(f!==x){6(f===v){i="1N"+d.1O(0).1P()+d.1Q(1)}y{i=f}c[i]=c[i]||8(a){4.1d(d,a);m 4}}6(e!==x){6(e!==v){h=e}c[h]=c[h]||8(){m 4.1e(d)}}m c};k.E=k.L("z.E",{A:8(a){4.1p=a},1n:8(){m"z.E: \\" + 1p + \\""}});k.13=k.L("z.13",k.E,{A:8(a){4["z.E"].A("1R 1S a w 1T \'"+a+"\' 1U 1V, 1W 1X 1Y w 1Z; e.g. 20."+a)}});k.15=k.L("z.15",k.E,{A:8(a){4["z.E"].A("1q 1r 17 21 a M 22; 23\'t 24 25 1b 26, 27 1b M 28: 5 29 = M "+a+"();")}});k.1a=k.L("z.1a",k.E,{A:8(a,b){4["z.E"].A("1q 1r 17 2a "+a+"; "+b)}});m k};5 1l=8(a){6(1f){6(1f.1s){1f.1s(a)}}};5 W=8(a,b){6(B a.o!=="S"&&B b.o!=="S"){n(5 s p a){b.q(a[s])}}y{n(5 s p a){6(a.2b(s))b[s]=a[s]}}};5 z=1h();5 1t=8(){5 b=9[0]||G,1g=9[1]||4,T=[],i=2,l=9.o,O;n(;i<l;i++){T.q(9[i])}O=8(){5 a=[];5 i=0;n(i=0,l=T.o;i<l;i++){a.q(T[i])}n(i=0,l=9.o;i<l;i++){a.q(9[i])}m b.u(1g,a)};O.2c=b;O.2d=1g;O.2e=T;m O};2f.7.P=8(){5 a=[],i=0,l=9.o;a.q(4);n(;i<l;i++){a.q(9[i])}m 1t.u(2g,a)};',62,141,"||||this|var|if|prototype|function|arguments|||||||||||||return|for|length|in|push|ooevents|||apply|true|class|false|else|oo|init|typeof|Properties|addProperty|Exception|Events|null|fire|properties|getters|setters|Class|new|getPropertyInternalName|bound|bind|on|withEvent|undefined|_args|bases|basePrototype|ooextend|afterClassDefined|addEvent|fireWith|classes|classesmap|throw|DuplicateClassNameException|initialiseBases|IncorrectSyntaxException|className|when|removeCallback|events|IncorrectArgumentsException|the|propertyChanged|setProperty|getProperty|console|_obj|ooreset|beforeInherited|isClass|afterInherited|oowarn|to|toString|Changed|message|Incorrect|syntax|warn|oobind|version|continue|object|Failed|inherit|building|substr|constructor|splice|The|last|argument|must|be|codeblock|execute|unshift|before|_|set|charAt|toUpperCase|slice|Cannot|define|because|already|exists|consider|namespacing|your|names|YourCompany|creating|instance|don|just|call|method|use|keyword|obj|calling|hasOwnProperty|func|context|args|Function|window".split("|"),0,{}));Stretchr.Error=oo.Class("Stretchr.Error",oo.Properties,{getters:["error"],toString:function(){return"("+this.$class.name+") "+this.error()}});Stretchr.ErrorAction=oo.Class("Stretchr.ErrorAction",Stretchr.Error,{init:function(e){this._error=e}});Stretchr.ErrorActionCollectiveResource=new Stretchr.ErrorAction("URL must refer to a single resource a collection of resources.");Stretchr.Client=oo.Class("Stretchr.Client",oo.Events,oo.Properties,{properties:["account","project","apiKey","host","protocol","apiVersion","transport","sessionStore","location"],init:function(e,t,n){this.setAccount(e).setProject(t).setApiKey(n).setTransport(new Stretchr.JSONPTransport(this)).setHost("stretchr.com").setProtocol("https").setApiVersion(Stretchr.apiVersion).setSessionStore(new Stretchr.CookieSessionStore).setLocation(new Stretchr.Location);this.checkParams()},at:function(e){var t=new Stretchr.Request(this,e);var n={};n[Stretchr.ParamKey]=this.apiKey();if(this.isLoggedIn()){n[Stretchr.ParamAuth]=this.authCode()}return t.params(n)},"new":function(e,t){var n=new Stretchr.Resource(this,e,t);n._data.setDirty(true);return n},url:function(e){if(e.substr(0,1)!="/"){e="/"+e}return[this.protocol(),"://",this.account(),".",this.host(),"/api/v",this.apiVersion(),"/",this.project(),e].join("")},loadAuthProviders:function(e){var t=e.success;e.success=function(n){if(t)t.apply(e,arguments)};this.at("~info/authproviders").read(e)},isLoggedIn:function(e){return this.sessionStore().get(Stretchr.SessionKeyLoggedIn)==Stretchr.SessionKeyLoggedInYes},loginUrl:function(e,t){var t=encodeURIComponent(t||location.href);return this.at("~auth/"+e+"/login").rooturl()+"?after="+t},login:function(e){this.location().redirect(this.loginUrl(e))},doLogin:function(e,t,n){var n=n||{};this.sessionStore().set(Stretchr.SessionKeyLoggedIn,Stretchr.SessionKeyLoggedInYes).set(Stretchr.SessionKeyAuthCode,e).set(Stretchr.SessionKeyuserpath,t);if(!n.noEvents){this.fire("login:success")}return true},logout:function(){this.sessionStore().set(Stretchr.SessionKeyLoggedIn,Stretchr.SessionKeyLoggedInNo).set(Stretchr.SessionKeyAuthCode,"").set(Stretchr.SessionKeyuserpath,"");return true},authCode:function(){return this.sessionStore().get(Stretchr.SessionKeyAuthCode)},userpath:function(){return this.sessionStore().get(Stretchr.SessionKeyuserpath)},checkParams:function(){if(this.location().param(Stretchr.UrlParamAuthKey)){this.doLogin(this.location().param(Stretchr.UrlParamAuthKey),this.location().param(Stretchr.UrlParamAuthUser),{noEvents:true});var e=this.location().params();delete e[Stretchr.UrlParamAuthKey];delete e[Stretchr.UrlParamAuthUser];this.location().redirect(Arg.url(e))}}});Stretchr.Request=oo.Class("Stretchr.Request",oo.Events,oo.Properties,{properties:["client","path","method"],init:function(e,t){this.setClient(e).setPath(t).setMethod(Stretchr.MethodGet);this._params=new Stretchr.Bag(null,Stretchr.Bag.ParamBagOptions);this._where=new Stretchr.Bag(null,Stretchr.merge(Stretchr.Bag.ParamBagOptions,{keyPrefix:Stretchr.PrefixFilterFields}))},isCollective:function(){var e=this.path();if(e.indexOf("/")!=0){e="/"+e}return e.split("/").length%2==0},params:function(e,t){var n=this._params.data.apply(this._params,arguments);return n===Stretchr.Bag.NoValue?this:n},where:function(e,t){var n=this._where.data.apply(this._where,arguments);return n===Stretchr.Bag.NoValue?this:n},querystring:function(){return Stretchr.Bag.querystring(this._params,this._where)},url:function(){var e=this.querystring();return this.rooturl()+(e!=""?"?"+e:"")},rooturl:function(){return this.client().url(this.path())},toString:function(){return this.method()+" "+this.url()},body:function(){if(arguments.length===1){var e=arguments[0];if(e.$class===Stretchr.Resource){e=e.data()}this._body=e;return this}return this._body},hasBody:function(){return this._body!=null},bodystr:function(){return JSON.stringify(this._body)},order:function(e){this._params.set(Stretchr.ParamOrder,e,true);return this},skip:function(e){this._params.set(Stretchr.ParamSkip,e,true);return this},limit:function(e){this._params.set(Stretchr.ParamLimit,e,true);return this},page:function(e,t){t=t||Stretchr.defaultPageSize;return this.skip(t*(e-1)).limit(t)},read:function(e){this.setMethod(Stretchr.MethodGet).client().transport().makeRequest(this,e);return this},create:function(e,t){if(this.isCollective()){this.setMethod(Stretchr.MethodPost)}else{this.setMethod(Stretchr.MethodPut)}this.body(e).client().transport().makeRequest(this,t);return this},replace:function(e,t){if(this.isCollective())throw Stretchr.ErrorActionCollectiveResource;this.body(e).setMethod(Stretchr.MethodPut).client().transport().makeRequest(this,t);return this},update:function(e,t){if(this.isCollective())throw Stretchr.ErrorActionCollectiveResource;this.body(e).setMethod(Stretchr.MethodPatch).client().transport().makeRequest(this,t);return this},remove:function(e){this.setMethod(Stretchr.MethodDelete).client().transport().makeRequest(this,e);return this}});Stretchr.Response=oo.Class("Stretchr.Response",oo.Properties,{getters:["status","data","items","success","errors","errorMessage","context","client","request","path","raw"],init:function(e,t,n){this._raw=n;this._client=e;this._status=n[Stretchr.ResponseKeyStatus];this._data=n[Stretchr.ResponseKeyData];this._items=[];if(this._data){if(this._data[Stretchr.ResponseKeyCollectionItems]){this._items=this._data[Stretchr.ResponseKeyCollectionItems]}else{this._items=[this._data]}}this._success=this._status>=200&&this._status<=299;this._changes=n[Stretchr.ResponseKeyDataChanges];this._context=n[Stretchr.ResponseKeyContext];this._request=t;if(t)this._path=t.path();this._errorMessage="";if(n[Stretchr.ResponseKeyErrors]){this._errors=[];for(var r in n[Stretchr.ResponseKeyErrors]){this._errorMessage=n[Stretchr.ResponseKeyErrors][r][Stretchr.ResponseKeyErrorsMessage];this._errors.push(this._errorMessage)}}},resource:function(){return new Stretchr.Resource(this.client(),this.path(),this.data())},resources:function(){return new Stretchr.ResourceCollection(this.client(),this.path(),this.data())},changes:function(){return new Stretchr.ChangeInfo(this._changes)}});Stretchr.ResponseNothingToDo=new Stretchr.Response(null,null,{"~status":200,"~info":"There was nothing to do"});Stretchr.Resource=oo.Class("Stretchr.Resource",oo.Events,oo.Properties,{getters:["client","path"],init:function(e,t,n){this._client=e;this._path=t;this._data=new Stretchr.Bag(n)},data:function(){var e=this._data.data.apply(this._data,arguments);return e===Stretchr.Bag.NoValue?this:e},hasId:function(){return this._data.has(Stretchr.ResourceKeyId)},id:function(){return this.data(Stretchr.ResourceKeyId)},save:function(e){if(!this._data.dirty()){this.fireWith("success",e,Stretchr.ResponseNothingToDo,null,e);this.fireWith("after",e,Stretchr.ResponseNothingToDo,null,e)}else{var t=this._client.at(this.path());e.$success=e.success;e.success=function(t){var n=t.changes().deltas()[0];this._data.data(n);if(e.$success)e.$success.apply(e,arguments)}.bind(this);if(this.hasId()){if(t.isCollective()){t._path+="/"+this.id()}t.update(this._data.delta(),e)}else{t.create(this,e)}}return this}});Stretchr.ResourceCollection=oo.Class("Stretchr.ResourceCollection",oo.Properties,{getters:["client","rawData","items","path","total","hasTotal"],init:function(e,t,n){this._client=e;this._rawData=n;this._path=t;this._hasTotal=typeof n[Stretchr.ResponseKeyCollectionTotal]!=="undefined";this._total=n[Stretchr.ResponseKeyCollectionTotal];this._items=[];var r=n[Stretchr.ResponseKeyCollectionItems];for(var i in r){this._items.push(new Stretchr.Resource(e,t,r[i]))}},count:function(){return this._items.length},pagecount:function(e){if(!this._hasTotal){throw'Cannot use pagecount without a total, add .params("total",1) to your request.'}return Math.ceil(this.total()/e)}});Stretchr.ChangeInfo=oo.Class("Stretchr.ChangeInfo",oo.Properties,{properties:["rawData"],init:function(e){this.setRawData(e);this._data=new Stretchr.Bag(e)},created:function(){return this.data(Stretchr.ResponseKeyChangeInfoCreated)||0},updated:function(){return this.data(Stretchr.ResponseKeyChangeInfoUpdated)||0},deleted:function(){return this.data(Stretchr.ResponseKeyChangeInfoDeleted)||0},deltas:function(){return this.data(Stretchr.ResponseKeyChangeInfoDeltas)||[]},data:function(){var e=this._data.data.apply(this._data,arguments);return e===Stretchr.Bag.NoValue?this:e}});Stretchr.Transport=oo.Class("Stretchr.Transport",oo.Events,oo.Properties,{properties:["client"],events:["before","after","success","error"],init:function(e){this.setClient(e)},makeRequest:function(e,t){throw"Stretchr.Transport.makeRequest: Cannot use abstract Stretchr.Transport class, use a more concrete version instead.  Like Stretchr.JSONPTransport."}});Stretchr.TestTransport=oo.Class("Stretchr.TestTransport",Stretchr.Transport,oo.Properties,{properties:["requests"],makeRequest:function(e,t){t=Stretchr.fixoptions(t);this._requests=this._requests||[];this._requests.push(arguments);this.fireWith("before",t,e,t);var n=this.fakeResponse(e,t);var r=new Stretchr.Response(this.client(),e,n);if(r.success()){this.fireWith("success",t,r,n,t)}else{this.fireWith("error",t,r,n,t)}this.fireWith("after",t,r,n,t)},fakeResponse:function(e){var t={};t[Stretchr.ResponseKeyStatus]=200;return t}});Stretchr.JSONPTransport=oo.Class("Stretchr.JSONPTransport",Stretchr.Transport,{makeRequest:function(e,t){t=Stretchr.fixoptions(t);Stretchr.log("<begin> Make JSONP request",true);Stretchr.log(e);Stretchr.log(t);this.fireWith("before",t,e,t);var n="sc"+Stretchr.counter();window[n]=function(){return function(r){Stretchr.log("<begin> Received JSONP response",true);Stretchr.log(r);var i=new Stretchr.Response(this.client(),e,r);Stretchr.log(i);if(i.success()){this.fireWith("success",t,i,r,t)}else{this.fireWith("error",t,i,r,t)}this.fireWith("after",t,i,r,t);window[n]=null;delete window[n];Stretchr.log("<end>",true)}.bind(this)}.bind(this)();e.params(Stretchr.ParamCallback,n);e.params(Stretchr.ParamAlways200,1);e.params(Stretchr.ParamMethod,e.method());if(e.hasBody()){e.params(Stretchr.ParamBody,e.bodystr())}var r=document.createElement("script");r.src=e.url();document.getElementsByTagName("head")[0].appendChild(r);this.lastCallbackFunctionName=n;Stretchr.log("<end>",true)}});Stretchr.Bag=oo.Class("Stretchr.Bag",oo.Events,oo.Properties,{properties:["dirty"],getters:["delta"],events:["change"],init:function(e,t){this._data=e||{};this._options=t||{};this._delta={};this.clean()},_set:function(e,t,n){if(!this._options["valueArrays"]){this._data[e]=t}else{if(n)delete this._data[e];if(typeof this._data[e]==="object"&&typeof this._data[e].length!=="undefined"){this._data[e].push(t)}else if(typeof this._data[e]==="undefined"){this._data[e]=[t]}}this._delta[e]=this._data[e]},set:function(e,t,n){if(e.$class===Stretchr.Bag){for(var r in e._data){this.set(r,e._data[r])}return this}this.setDirty(true);this.withEvent("change",this._data[e],t,function(){this._set(e,t,n)}.bind(this));return this},get:function(e){return e?this._data[e]:this._data},has:function(e){return typeof this._data[e]!=="undefined"},clean:function(){this.setDirty(false);this._delta={}},data:function(e,t){if(arguments.length==0){return this._data}if(typeof e!="object"&&typeof t!="undefined"){this.set(e,t)}else if(typeof e!="object"){return this.get(e)}else{for(var n in e){this._set(n,e[n])}}return Stretchr.Bag.NoValue},querystring:function(e){var e=Stretchr.merge(this._options,e);var t=e["keyPrefix"]||"";var n=[];for(var r in this._data)for(var i in this._data[r])n.push(encodeURIComponent(t+r)+"="+encodeURIComponent(this._data[r][i]));return n.join("&")}});Stretchr.Bag.NoValue={"Stretchr.Bag.NoValue":true};Stretchr.Bag.querystring=function(){var e=[];for(var t in arguments){var n=arguments[t];if(n.$class!=Stretchr.Bag)throw"Stretchr.Bag.querystring: Must only pass Stretchr.Bag objects.";var r=n.querystring();if(r!=""){e.push(r)}}return e.join("&")};Stretchr.Bag.ParamBagOptions={valueArrays:true};Stretchr.CookieSessionStore=oo.Class("Stretchr.CookieSessionStore",oo.Events,oo.Properties,{events:["change"],properties:["expiryDays"],init:function(e){this._expiryDays=typeof e!=="undefined"?e:28},set:function(e,t,n){Stretchr.setCookie(e,t,this.expiryDays());this.fireWith("change",n,e,t);return this},get:function(e,t){return Stretchr.cookie(e)}});Stretchr.cookie=function(e){e=Stretchr.cookiePrefix+e;var t=document.cookie;var n=t.indexOf(" "+e+"=");if(n==-1){n=t.indexOf(e+"=")}if(n==-1){t=null}else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);if(r==-1){r=t.length}t=unescape(t.substring(n,r))}return t};Stretchr.cookiePrefix="stretchr_";Stretchr.setCookie=function(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var i=escape(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=Stretchr.cookiePrefix+e+"="+i};Stretchr.Location=oo.Class("Stretchr.Location",oo.Properties,{param:function(e){return Arg(e)},params:function(){return Arg.all()},redirect:function(e){window.location.href=e}});Stretchr.TestLocation=oo.Class("Stretchr.TestLocation",{init:function(){this._params={};this._history=[]},setParam:function(e,t){this._params[e]=t},param:function(e){return this._params[e]},params:function(){return this._params},redirect:function(e){this._history.push(e)},history:function(){return this._history}})
